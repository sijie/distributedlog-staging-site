<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>SessionLock (Apache DistributedLog for Java, version latest)</title>
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SessionLock (Apache DistributedLog for Java, version latest)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SessionLock.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/distributedlog/lock/NopDistributedLock.html" title="class in org.apache.distributedlog.lock"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/apache/distributedlog/lock/SessionLockFactory.html" title="interface in org.apache.distributedlog.lock"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/distributedlog/lock/SessionLock.html" target="_top">Frames</a></li>
<li><a href="SessionLock.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.distributedlog.lock</div>
<h2 title="Interface SessionLock" class="title">Interface SessionLock</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public interface <span class="typeNameLabel">SessionLock</span></pre>
<div class="block">One time lock.
 <p>The lock is only alive during a given period. It should
 be not usable if the lock is expired.
 <p>Listener could be registered by <a href="../../../../org/apache/distributedlog/lock/SessionLock.html#setLockListener-org.apache.distributedlog.lock.LockListener-"><code>setLockListener(LockListener)</code></a>
 to receive state changes of the lock.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../../org/apache/distributedlog/lock/LockWaiter.html" title="class in org.apache.distributedlog.lock">LockWaiter</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/distributedlog/lock/SessionLock.html#asyncTryLock-long-java.util.concurrent.TimeUnit-">asyncTryLock</a></span>(long&nbsp;timeout,
            <a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)</code>
<div class="block">Acquire the lock in asynchronous way.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/distributedlog/lock/SessionLock.html#asyncUnlock--">asyncUnlock</a></span>()</code>
<div class="block">Release a claimed lock in the asynchronous way.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/distributedlog/lock/SessionLock.html#isLockExpired--">isLockExpired</a></span>()</code>
<div class="block">Whether the lock is expired or not?</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/distributedlog/lock/SessionLock.html#isLockHeld--">isLockHeld</a></span>()</code>
<div class="block">Whether the lock is held or not?</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../org/apache/distributedlog/lock/SessionLock.html" title="interface in org.apache.distributedlog.lock">SessionLock</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/distributedlog/lock/SessionLock.html#setLockListener-org.apache.distributedlog.lock.LockListener-">setLockListener</a></span>(org.apache.distributedlog.lock.LockListener&nbsp;lockListener)</code>
<div class="block">Set lock listener for lock state changes.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/distributedlog/lock/SessionLock.html#tryLock-long-java.util.concurrent.TimeUnit-">tryLock</a></span>(long&nbsp;timeout,
       <a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)</code>
<div class="block">Acquire the lock if it is free within given waiting time.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/distributedlog/lock/SessionLock.html#unlock--">unlock</a></span>()</code>
<div class="block">Release a claimed lock.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setLockListener-org.apache.distributedlog.lock.LockListener-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLockListener</h4>
<pre><a href="../../../../org/apache/distributedlog/lock/SessionLock.html" title="interface in org.apache.distributedlog.lock">SessionLock</a>&nbsp;setLockListener(org.apache.distributedlog.lock.LockListener&nbsp;lockListener)</pre>
<div class="block">Set lock listener for lock state changes.
 <p>Typically a listener should be set before try locking.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>lockListener</code> - lock listener for state changes.</dd>
</dl>
</li>
</ul>
<a name="isLockHeld--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isLockHeld</h4>
<pre>boolean&nbsp;isLockHeld()</pre>
<div class="block">Whether the lock is held or not?</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the lock is held, otherwise false.</dd>
</dl>
</li>
</ul>
<a name="isLockExpired--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isLockExpired</h4>
<pre>boolean&nbsp;isLockExpired()</pre>
<div class="block">Whether the lock is expired or not?
 <p>If a lock is expired, it will not be reusable any more. Because it is an one-time lock.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the lock is expired, otherwise false.</dd>
</dl>
</li>
</ul>
<a name="tryLock-long-java.util.concurrent.TimeUnit-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryLock</h4>
<pre>void&nbsp;tryLock(long&nbsp;timeout,
             <a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)
      throws <a href="../../../../org/apache/distributedlog/exceptions/OwnershipAcquireFailedException.html" title="class in org.apache.distributedlog.exceptions">OwnershipAcquireFailedException</a>,
             <a href="../../../../org/apache/distributedlog/exceptions/LockingException.html" title="class in org.apache.distributedlog.exceptions">LockingException</a></pre>
<div class="block">Acquire the lock if it is free within given waiting time.
 <p>
 Calling this method will attempt to acquire the lock. If the lock
 is already acquired by others, the caller will wait for <i>timeout</i>
 period. If the caller could claim the lock within <i>timeout</i> period,
 the caller acquire the lock. Otherwise, it would fail with <a href="../../../../org/apache/distributedlog/exceptions/OwnershipAcquireFailedException.html" title="class in org.apache.distributedlog.exceptions"><code>OwnershipAcquireFailedException</code></a>.
 <p>
 <a href="../../../../org/apache/distributedlog/lock/SessionLock.html#unlock--"><code>unlock()</code></a> should be called to unlock a claimed lock. The caller
 doesn't need to unlock to clean up resources if <i>tryLock</i> fails.
 <p>
 <i>tryLock</i> here is effectively the combination of following asynchronous calls.
 <pre>
     ZKDistributedLock lock = ...;
     CompletableFuture<LockWaiter> attemptFuture = lock.asyncTryLock(...);

     boolean acquired = waiter.waitForAcquireQuietly();
     if (acquired) {
         // ...
     } else {
         // ...
     }
 </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>timeout</code> - timeout period to wait for claiming ownership</dd>
<dd><code>unit</code> - unit of timeout period</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/distributedlog/exceptions/OwnershipAcquireFailedException.html" title="class in org.apache.distributedlog.exceptions">OwnershipAcquireFailedException</a></code> - if the lock is already acquired by others</dd>
<dd><code><a href="../../../../org/apache/distributedlog/exceptions/LockingException.html" title="class in org.apache.distributedlog.exceptions">LockingException</a></code> - when encountered other lock related issues.</dd>
</dl>
</li>
</ul>
<a name="asyncTryLock-long-java.util.concurrent.TimeUnit-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>asyncTryLock</h4>
<pre><a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../../org/apache/distributedlog/lock/LockWaiter.html" title="class in org.apache.distributedlog.lock">LockWaiter</a>&gt;&nbsp;asyncTryLock(long&nbsp;timeout,
                                           <a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)</pre>
<div class="block">Acquire the lock in asynchronous way.
 <p>
 Calling this method will attempt to place a lock waiter to acquire this lock.
 The future returned by this method represents the result of this attempt. It doesn't mean
 the caller acquired the lock or not. The application should check <a href="../../../../org/apache/distributedlog/lock/LockWaiter.html#getAcquireFuture--"><code>LockWaiter.getAcquireFuture()</code></a>
 to see if it acquired the lock or not.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>timeout</code> - timeout period to wait for claiming ownership</dd>
<dd><code>unit</code> - unit of timeout period</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>lock waiter representing this attempt of acquiring lock.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../org/apache/distributedlog/lock/SessionLock.html#tryLock-long-java.util.concurrent.TimeUnit-"><code>tryLock(long, TimeUnit)</code></a></dd>
</dl>
</li>
</ul>
<a name="unlock--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlock</h4>
<pre>void&nbsp;unlock()</pre>
<div class="block">Release a claimed lock.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../org/apache/distributedlog/lock/SessionLock.html#tryLock-long-java.util.concurrent.TimeUnit-"><code>tryLock(long, TimeUnit)</code></a></dd>
</dl>
</li>
</ul>
<a name="asyncUnlock--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>asyncUnlock</h4>
<pre><a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;asyncUnlock()</pre>
<div class="block">Release a claimed lock in the asynchronous way.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>future representing the result of unlock operation.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../org/apache/distributedlog/lock/SessionLock.html#unlock--"><code>unlock()</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SessionLock.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/distributedlog/lock/NopDistributedLock.html" title="class in org.apache.distributedlog.lock"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/apache/distributedlog/lock/SessionLockFactory.html" title="interface in org.apache.distributedlog.lock"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/distributedlog/lock/SessionLock.html" target="_top">Frames</a></li>
<li><a href="SessionLock.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2016-2017 <a href="http://www.apache.org/">The Apache Software Foundation</a>. All Rights Reserved.</small></p>
</body>
</html>
